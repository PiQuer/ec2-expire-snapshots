<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>ec2-expire-snapshots - Delete expired EBS snapshots in Amazon EC2</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:root@localhost" />
</head>

<body style="background-color: white">


<!-- INDEX BEGIN -->
<div name="index">
<p><a name="__index__"></a></p>

<ul>

	<li><a href="#name">NAME</a></li>
	<li><a href="#synopsis">SYNOPSIS</a></li>
	<li><a href="#options">OPTIONS</a></li>
	<li><a href="#arguments">ARGUMENTS</a></li>
	<li><a href="#description">DESCRIPTION</a></li>
	<ul>

		<li><a href="#preservation_options">PRESERVATION OPTIONS</a></li>
		<li><a href="#background">BACKGROUND</a></li>
		<li><a href="#safety">SAFETY</a></li>
		<li><a href="#date_time_formats">DATE/TIME FORMATS</a></li>
	</ul>

	<li><a href="#examples">EXAMPLES</a></li>
	<li><a href="#environment">ENVIRONMENT</a></li>
	<li><a href="#files">FILES</a></li>
	<li><a href="#installation">INSTALLATION</a></li>
	<li><a href="#see_also">SEE ALSO</a></li>
	<li><a href="#caveats">CAVEATS</a></li>
	<li><a href="#bugs">BUGS</a></li>
	<li><a href="#credits">CREDITS</a></li>
	<li><a href="#author">AUTHOR</a></li>
	<li><a href="#license">LICENSE</a></li>
</ul>

<hr name="index" />
</div>
<!-- INDEX END -->

<p>
</p>
<h1><a name="name">NAME</a></h1>
<p>ec2-expire-snapshots - Delete expired EBS snapshots in Amazon EC2</p>
<p>
</p>
<hr />
<h1><a name="synopsis">SYNOPSIS</a></h1>
<pre>
 ec2-expire-snapshots [opts] VOLUMEID...</pre>
<p>
</p>
<hr />
<h1><a name="options">OPTIONS</a></h1>
<dl>
<dt><strong><a name="h_help" class="item">-h --help</a></strong></dt>

<dd>
<p>Print help and exit.</p>
</dd>
<dt><strong><a name="d_debug" class="item">-d --debug</a></strong></dt>

<dd>
<p>Debug mode.</p>
</dd>
<dt><strong><a name="q_quiet" class="item">-q --quiet</a></strong></dt>

<dd>
<p>Quiet mode.</p>
</dd>
<dt><strong><a name="n_noaction" class="item">-n --noaction</a></strong></dt>

<dd>
<p>Don't do it. Just say what you would have done.</p>
</dd>
<dt><strong><a name="aws_access_key_id_key" class="item">--aws-access-key-id KEY</a></strong></dt>

<dt><strong><a name="aws_secret_access_key_secret" class="item">--aws-secret-access-key SECRET</a></strong></dt>

<dd>
<p>Amazon AWS access key and secret access key.  Defaults to
environment variables or .awssecret file contents described below.</p>
</dd>
<dt><strong><a name="aws_access_key_id_file_keyfile" class="item">--aws-access-key-id-file KEYFILE</a></strong></dt>

<dt><strong><a name="aws_secret_access_key_file_secretfile" class="item">--aws-secret-access-key-file SECRETFILE</a></strong></dt>

<dd>
<p>Files containing Amazon AWS access key and secret access key.
Defaults to environment variables or .awssecret file contents
described below.</p>
</dd>
<dt><strong><a name="aws_credentials_file_credentialsfile" class="item">--aws-credentials-file CREDENTIALSFILE</a></strong></dt>

<dd>
<p>File containing both the Amazon AWS access key and secret access
key on separate lines and in that order.  Defaults to contents of
$AWS_CREDENTIALS environment variable or the value $HOME/.awssecret</p>
</dd>
<dt><strong><a name="region_region" class="item">--region REGION</a></strong></dt>

<dd>
<p>Specify a different EC2 region like &quot;eu-west-1&quot;.  Defaults to
&quot;us-east-1&quot;.</p>
</dd>
<dt><strong><a name="expiration_tag_name_tagname_not_yet_implemented" class="item">--expiration-tag-name TAGNAME [NOT YET IMPLEMENTED]</a></strong></dt>

<dt><strong><a name="expiration_tag_optional_not_yet_implemented" class="item">--expiration-tag-optional [NOT YET IMPLEMENTED]</a></strong></dt>

<dt><strong><a name="keep_first_yearly_yearcount" class="item">--keep-first-yearly YEARCOUNT</a></strong></dt>

<dt><strong><a name="keep_first_quarterly_quartercount_not_yet_implemented" class="item">--keep-first-quarterly QUARTERCOUNT [NOT YET IMPLEMENTED]</a></strong></dt>

<dt><strong><a name="keep_first_monthly_monthcount" class="item">--keep-first-monthly MONTHCOUNT</a></strong></dt>

<dt><strong><a name="keep_first_weekly_weekcount" class="item">--keep-first-weekly WEEKCOUNT</a></strong></dt>

<dt><strong><a name="week_starts_dayofweek_not_yet_implemented" class="item">--week-starts DAYOFWEEK [NOT YET IMPLEMENTED]</a></strong></dt>

<dt><strong><a name="keep_first_daily_daycount" class="item">--keep-first-daily DAYCOUNT</a></strong></dt>

<dt><strong><a name="keep_first_hourly_hourcount" class="item">--keep-first-hourly HOURCOUNT</a></strong></dt>

<dt><strong><a name="keep_most_recent_count" class="item">--keep-most-recent COUNT</a></strong></dt>

<dt><strong><a name="keep_all_since_datetime" class="item">--keep-all-since DATETIME</a></strong></dt>

<dd>
<p>These options identify which EBS snapshots should be preserved.  See
the &quot;PRESERVATION OPTIONS&quot; section for more details on what they mean
and how to use them.</p>
</dd>
<dt><strong><a name="force_delete_all" class="item">--force-delete-all</a></strong></dt>

<dd>
<p>This dangerous option overrides all other default option values, EBS
snapshot tag values, and normal safety measures.  All EBS snapshots
for the specified EBS volumes are attemped to be deleted. Even the
most recent EBS snapshot is deleted.  The EBS snapshots are deleted
even if the EBS volume does not exist.  After this option is used, you
will have no EBS snapshots for the specified EBS volume, unless there
was some error condition that prevented an EBS snapshot from being
deleted.</p>
<p>This is not a normal EBS snapshot expiration strategy, but is a
convenience option for use when throwing away all data associated with
an EBS volume that is no longer useful for any purpose.</p>
</dd>
</dl>
<p>
</p>
<hr />
<h1><a name="arguments">ARGUMENTS</a></h1>
<dl>
<dt><strong><a name="volumeid" class="item">VOLUMEID</a></strong></dt>

<dd>
<p>EBS volume ids for which EBS snapshots are to be expired (deleted).
The EBS volume does not have to exist for its EBS snapshots to be
found and deleted.</p>
</dd>
</dl>
<p>
</p>
<hr />
<h1><a name="description">DESCRIPTION</a></h1>
<p>This program deletes expired EBS snapshots of the specified EBS
volumes on Amazon EC2.  Different expiration strategies and
specifications are supported.</p>
<p>When deciding what options to use, it's easier to think of which EBS
snapshots should be *preserved* instead of which should be expired and
deleted.</p>
<p>As a general rule, all EBS snapshots that you have not requested to be
preserved will be deleted.</p>
<p>Unless overridden, the software always preserves the most recent EBS
snapshot, along with any EBS snapshots where it isn't clear what was
intended (e.g., unrecognized expiration tag values).</p>
<p>Please read the descriptions of the preservation options carefully.
They might not mean what they look like on first glance.  For example,
these mean two very different things:</p>
<dl>
<dt><strong><a name="keep_all_since_3_days_ago" class="item">--keep-all-since '3 days ago'</a></strong></dt>

<dd>
<p>This option asks the program to preserve *every* EBS snapshot that was
created since the current time 3 days ago, i.e., the most recent 72
hours.</p>
</dd>
<dt><strong><a name="keep_first_daily_3" class="item">--keep-first-daily 3</a></strong></dt>

<dd>
<p>This option asks the program to preserve the first completed EBS
snapshot that was created on each of the last 3 calendar days
including &quot;today&quot;, &quot;yesterday&quot;, and &quot;2 days ago&quot;, calculated in UTC.
All other EBS snapshots of the EBS volume may be deleted unless there
are other conditions specified to prevent that.</p>
</dd>
</dl>
<p>
</p>
<h2><a name="preservation_options">PRESERVATION OPTIONS</a></h2>
<p>The following options control which EBS snapshots are preserved.  If
an EBS snapshot is not flagged as one to be preserved, then it is
considered expired and will be deleted.</p>
<p>There are three basic expiration methodologies supported by this
program.</p>
<ol>
<li><strong><a name="keep_recent" class="item">Keep Recent</a></strong>

<p>This is the simplest approach where you tell the program to preserve a
specifc number of the the most recent EBS snapshots created (e.g.,
&quot;10&quot;) and/or to preserve any EBS snapshots created since a particular
date/time in the past (e.g., &quot;7 days ago&quot;).</p>
<p>The specific options related to this approach include:</p>
<dl>
<dt><strong><a name="keep_most_recent_count2" class="item">--keep-most-recent COUNT</a></strong></dt>

<dd>
<p>The most recent COUNT completed EBS snapshots will be preserved.  By
default, the most recent EBS snapshot is always preserved, but this
can be overridden against our recommendation by explicitly specifying
&quot;0&quot; in this option.</p>
</dd>
<dt><strong><a name="keep_all_since_datetime2" class="item">--keep-all-since DATETIME</a></strong></dt>

<dd>
<p>The EBS snapshots that were created at or after DATETIME will be
preserved.  The value may be an absolute date/time or it may be
relative to now.</p>
<p>See &quot;DATE/TIME FORMATS&quot; below for recommended value formats.</p>
</dd>
</dl>
</li>
<li><strong><a name="keep_one_per_calendar_clock_cycle" class="item">Keep One Per Calendar/Clock Cycle</a></strong>

<p>This approach lets you keep many very recent copies of EBS snapshots,
somewhat fewer as you go into the near-term past, and more sparse
backups as you get to distant history.  The time frames involved are
hourly, daily, weekly, monthly, quarterly, and yearly.  You can
specify as many or as few of these time periods as you wish, and save
as many cycles of each as you wish.</p>
<p>The specific options related to this approach include:</p>
<dl>
<dt><strong><a name="keep_first_hourly_hourcount2" class="item">--keep-first-hourly HOURCOUNT</a></strong></dt>

<dt><strong><a name="keep_first_daily_daycount2" class="item">--keep-first-daily DAYCOUNT</a></strong></dt>

<dt><strong><a name="keep_first_weekly_weekcount2" class="item">--keep-first-weekly WEEKCOUNT</a></strong></dt>

<dt><strong><a name="keep_first_monthly_monthcount_not_yet_implemented" class="item">--keep-first-monthly MONTHCOUNT [NOT YET IMPLEMENTED]</a></strong></dt>

<dt><strong><a name="keep_first_quarterly_quartercount_not_yet_implemented2" class="item">--keep-first-quarterly QUARTERCOUNT [NOT YET IMPLEMENTED]</a></strong></dt>

<dt><strong><a name="keep_first_yearly_yearcount2" class="item">--keep-first-yearly YEARCOUNT</a></strong></dt>

<dd>
<p>Preserve the first completed EBS snapshot created in each of the most
recent COUNT hours/days/weeks/months/quarters/years, respectively,
calculated in UTC.</p>
<p>The current hour/day/week/month/quarter/year is considered &quot;1&quot;.  A
COUNT of &quot;all&quot;, case insensitive, is equivalent to an infinitely high
COUNT.</p>
<p>A single EBS snasphot may match multiple options.  For example, the
first EBS snapshot in a month is also going to be the first EBS
snapshot for a particular day, but perhaps not the first for any
particular week.  There may be no completed EBS snapshots in some time
periods.</p>
<p>The first completed EBS snapshot in a month may have been taken on a
date later than the first day of the month and the dates don't need to
be the same across different months.  For example, the first snapshot
of the month may have been created on the 3rd.  This software simply
preserves the oldest completed EBS snapshot in each relevant time
period.</p>
<p>If hourly EBS snapshots would be too many for you, you can simply not
create EBS snapshots that often.  For example, you could create EBS
snapshots every 6 hours and then specify &quot;--keep-first-hourly 30&quot; to
preserve about 4, depending on what exactly the time stamps are on the
EBS snapshots.</p>
</dd>
<dt><strong><a name="week_starts_dayofweek_not_yet_implemented2" class="item">--week-starts DAYOFWEEK  [NOT YET IMPLEMENTED]</a></strong></dt>

<dd>
<p>Specifies the first day of each week as you think of it.  This is used
in conjunction with --keep-first-weekly to know which EBS snapshot you
prefer to keep.  Supported values include &quot;Sunday&quot;, &quot;Sun&quot;, &quot;Monday&quot;,
&quot;Mon&quot;, case insensitively.  The default first day of the week is Monday.</p>
</dd>
</dl>
</li>
<li><strong><a name="ask_the_snapshot" class="item">Ask The Snapshot</a></strong>

<p>This approach transfers the decision making about how long each EBS
snapshot should be preserved onto some other process, perhaps the one
that creates the EBS snapshots in the first place.  That external
process must create or add a tag to each EBS snapshot indicating how
long it should be preserved or when it should expire.</p>
<p>This gives maximum flexibility for any system that goes beyond the
simple rules understood by this program.  It also allows for
exceptions to be made to these rules by humans who make decisions
about how long a specific EBS snapshot should be preserved.</p>
<p>The specific options related to this approach include:</p>
<dl>
<dt><strong><a name="expiration_tag_name_tagname_not_yet_implemented2" class="item">--expiration-tag-name TAGNAME [NOT YET IMPLEMENTED]</a></strong></dt>

<dd>
<p>Specifies the name of a tag to look for on each EBS snapshot
indicating when that EBS snapshot is allowed to expire.  The tag value
can either be an absolute date/time, or a date/time offset expression
that is to be calculated relative to the timestamp of the EBS
snapshot's creation. For example, Expiration: +8 days</p>
<p>If the calculated expiration time is in the future or is unrecognized,
then the EBS volume is preserved.  A tag value of &quot;never&quot; or &quot;forever&quot;
will prevent an EBS snapshot from ever being expired.</p>
<p>If this option is specified multiple times, then each tag name is
checked on each EBS snapshot, and any one of them can trigger the
preservation of an EBS snapshot (even if another tag indicates that
the snapshot has expired).</p>
<p>See &quot;DATE/TIME FORMATS&quot; below for recommended tag value formats.</p>
</dd>
<dt><strong><a name="expiration_tag_optional_not_yet_implemented2" class="item">--expiration-tag-optional [NOT YET IMPLEMENTED]</a></strong></dt>

<dd>
<p>By default, if you specify one or more --expiration-tag-name options
and an EBS snapshot does not have any of those tag names, then that
EBS snapshot will be preserved.</p>
<p>Including the --expiration-tag-optional option tells the program that
EBS snapshots without the expiration tags are allowed to be expired.</p>
</dd>
</dl>
</li>
</ol>
<p>It is acceptable and encouraged to include options from across
multiple of these strategies.  This program will preserve all EBS
snapshots that match any of the conditions.</p>
<p>For example, you may want to keep 24 hourly, 7 daily, 4 weekly, and 12
monthly EBS snapshots as a base strategy.</p>
<p>Then, you could add the last 3 hours of all EBS snapshots just in case
you end up creating some EBS snapshots manually during a sensitive
file modification procedure and you don't want your EBS snapshots
inadvertently deleted in the event you need to undo some recent work.</p>
<p>Then, you could add in some optional expiration tags that can be set
to override normal expiration and preserve for a longer time period
any special EBS snapshots that you care to flag from time to time.</p>
<p>
</p>
<h2><a name="background">BACKGROUND</a></h2>
<p>The creation of EBS snapshots on EC2 is a risk reduction and safety
improvement measure in a few ways:</p>
<ul>
<li>
<p>An EBS snapshot is a form of backup and disaster recovery
preparedness, allowing you to restore data that may have been deleted,
corrupted, or in any other way lost on the EBS volume due to hardware,
system, environmental, or human error at a time after the EBS snapshot
was created.</p>
</li>
<li>
<p>EBS snapshots are available from multiple availability zones in a
given EC2 region even if the availability zone for the source EBS
volume is inaccessible.</p>
</li>
<li>
<p>An EBS snapshot automatically and transparently reduces the rate of
failure of the underlying EBS volume, due to the way that Amazon has
designed and implemented the EBS system.</p>
<p>The EBS system can automatically recover parts of a failing EBS volume
from an EBS snapshot, if the blocks that are failing have not been
modified since the EBS snapshot was taken.  The more frequently an EBS
volume is snapshotted, the lower its potential rate of failure.</p>
</li>
</ul>
<p>With backup strategies using physical media, we normally introduce a
backup rotation strategy because we have a limited amount of disk or
tape to store the backups.  With EC2, the available EBS snapshot space
is perceived as limitless at the level a single organizion could use
it.</p>
<p>So, why do we want to expire and delete EBS snapshots?</p>
<ul>
<li>
<p>EBS snapshots cost money to store on EC2.  Even though multiple EBS
snapshots share the same copies of unchanged blocks, and even though
the block contents are stored in a compressed format, these charges
can add up over time when you have a lot of EBS snapshots.</p>
</li>
<li>
<p>There is a limit on the number of EBS snapshots a single EC2 account
can have at any point in time.  This limit can easily be increased by
submitting a request to Amazon with an explanation of why you need
more, but eventually you're probably going to want to trim back on how
many EBS snapshots you retain.</p>
</li>
<li>
<p>Depending on the tools you are using to manage your AWS resources, it
can get unwieldy to manage large numbers of EBS snapshots.</p>
</li>
</ul>
<p>This program tries to help manage your EBS snapshot storage costs by
deleting EBS snapshots that you believe are the least helpful to your
backup needs, while preserving a select set of EBS snapshots that you
believe are likely to be the most important in the near and distant
future.</p>
<p>Just remember: When you (or this software) delete an EBS snapshot, it
is gone forever and is completely irrecoverable!</p>
<p>
</p>
<h2><a name="safety">SAFETY</a></h2>
<p>This software attempts to be somewhat conservative and to protect you
in a few ways:</p>
<ul>
<li>
<p>This program will exit with error unless you specify at least one of
the preservation options to give this program an indication of what
your expiration strategy is and what EBS snapshots should be
preserved.</p>
</li>
<li>
<p>If you use the --expiration-tag-name option and this program cannot
make sense of the value for that tag on one of the EBS snapshots, then
that EBS snapshot is not deleted.</p>
</li>
<li>
<p>If you specify --expiration-tag-name and --expiration-tag-optional
without any of the --keep options, and the tag name(s) are not found
on any EBS snapshots, then the program exits with an error instead of
deleting all your EBS snapshots.</p>
</li>
<li>
<p>The most recent EBS snapshot for an EBS volume is always preserved
unless you explicitly request it to be deleted with:</p>
<pre>
 --keep-most-recent 0</pre>
<p>Deleting the most recent EBS snapshot reduces the reliability of the
EBS volume and increases the time, IO, and cost required to create a
new EBS snapshot in the future.</p>
</li>
<li>
<p>If any of the options indicate to this program that an EBS snapshot
should be preserved, then it will not be deleted.  For example, even
if there is an expiration tag on an EBS snapshot that indicates it should
expire yesterday, it will not be deleted if it is also the first
EBS snapshot of this month and you specified --keep-first-monthly greater
than zero.</p>
</li>
<li>
<p>EBS snapshots in the &quot;pending&quot; or other non-&quot;completed&quot; states are
completely ignored by this program.  For example, only &quot;completed&quot;
snapshots are counted when deciding what is the first snapshot of a
calendar period to preserve.</p>
<p>We have no guarantee that a &quot;pending&quot; snapshot will ever complete
successfully, but if it does complete before the next time you run
this program, then it will be taken into account in the calculations
and may become the new &quot;first&quot; EBS snapshot to be preserved for a time
period.</p>
</li>
</ul>
<p>
</p>
<h2><a name="date_time_formats">DATE/TIME FORMATS</a></h2>
<p>This software supports and interprets a number of different date
formats, but if you have a choice, here are some samples of
recommended formats for absolute dates and times:</p>
<pre>
 &quot;2011-12-31&quot;
 &quot;2012-01-15 14:56&quot;
 &quot;2015-07-22 09:23:45&quot;</pre>
<p>Dates specified without times are assumed to be at &quot;00:00:00&quot;
(midnight starting that date).</p>
<p>This software assumes that dates and times without time zones are in
UTC.</p>
<p>Here are some samples of recommended formats for relative time
offsets for &quot;expires in&quot; tags on EBS snapshots:</p>
<pre>
 &quot;+1 year&quot;
 &quot;+10 weeks&quot;
 &quot;+3 days&quot;
 &quot;+12 hours&quot;</pre>
<p>Here are some examples of recommended formats for relative time
offsets for the --keep-all-since option:</p>
<pre>
 &quot;1 year ago&quot;
 &quot;10 weeks ago&quot;
 &quot;1 day ago&quot;
 &quot;12 hours ago&quot;</pre>
<p>
</p>
<hr />
<h1><a name="examples">EXAMPLES</a></h1>
<p>This simple example saves the most recent 10 snapshots:</p>
<pre>
    ec2-expire-snapshots                   \
        --keep-most-recent 10              \
        vol-11111111</pre>
<p>This example saves the last 7 days of snapshots:</p>
<pre>
    ec2-expire-snapshots                   \
        --keep-all-since &quot;7 days ago&quot;     \
        vol-22222222</pre>
<p>This example keeps one snapshot per day for the last 7 days, and one
snapshot per month for the last 12 months.  There is also an implicit
saving of the most recent snapshot by default:</p>
<pre>
    ec2-expire-snapshots                   \
        --keep-first-daily 7               \
        --keep-first-monthly 12            \
        vol-33333333</pre>
<p>If you always determine how long a snapshot should be saved when you
take the EBS snapshot and you store this value in a specific tag named
&quot;Expiration&quot;, then you may leave out all other &quot;keep&quot; options only pay
attention to your tag.  Any volume without the tag will be preserved
forever in this example.</p>
<pre>
    ec2-expire-snapshots                   \
        --expiration-tag-name &quot;Expiration&quot; \
        vol-44444444</pre>
<p>This example combines a number of preservation strategies, any one of
which could trigger the preservation of a given EBS snapshot:</p>
<pre>
    ec2-expire-snapshots                   \
        --keep-most-recent 1               \
        --keep-all-since &quot;2 hours ago&quot;     \
        --keep-first-hourly 24             \
        --keep-first-daily 7               \
        --keep-first-weekly 4              \
        --keep-first-monthly 12            \
        --keep-first-yearly all            \
        --expiration-tag-optional          \
        --expiration-tag-name &quot;Expiration&quot; \
        --expiration-tag-name &quot;Expires&quot;    \
        --expiration-tag-name &quot;Keep-For&quot;   \
        --expiration-tag-name &quot;Keep-Until&quot; \
        vol-55555555                       \
        vol-66666666                       \
        vol-77777777</pre>
<p>Delete all EBS snapshots associated with an EBS volume, no matter when
they were taken or what their tags say.  Make sure you really want to
do this.  There is no way to recover.</p>
<pre>
    ec2-expire-snapshots   \
        --force-delete-all \
        vol-88888888</pre>
<p>
</p>
<hr />
<h1><a name="environment">ENVIRONMENT</a></h1>
<dl>
<dt><strong><a name="_aws_access_key_id" class="item">$AWS_ACCESS_KEY_ID</a></strong></dt>

<dd>
<p>Default value for access key.
Can be overridden by command line options.</p>
</dd>
<dt><strong><a name="_aws_secret_access_key" class="item">$AWS_SECRET_ACCESS_KEY</a></strong></dt>

<dd>
<p>Default value for secret access key.  Can be overridden by command
line options.</p>
</dd>
<dt><strong><a name="_aws_credentials" class="item">$AWS_CREDENTIALS</a></strong></dt>

<dd>
<p>Default value for filename containing both access key and secret
access key on separate lines and in that order. Can be overriden by
the --aws-credentials command line option.</p>
</dd>
</dl>
<p>
</p>
<hr />
<h1><a name="files">FILES</a></h1>
<dl>
<dt><strong><a name="_home__my_cnf" class="item">$HOME/.my.cnf</a></strong></dt>

<dd>
<p>Default values for MySQL user and password are sought here in the
standard format.</p>
</dd>
<dt><strong><a name="_home__awssecret" class="item">$HOME/.awssecret</a></strong></dt>

<dd>
<p>Default values for access key and secret access keys are sought here.
Can be overridden by environment variables and command line options.</p>
</dd>
</dl>
<p>
</p>
<hr />
<h1><a name="installation">INSTALLATION</a></h1>
<p>[THIS WILL NOT WORK UNTIL THIS SOFTWARE HAS BEEN RELEASED!]</p>
<p>The ec2-expire-snapshots program is part of the
<strong>ec2-expire-snapshots</strong> package.</p>
<p>On most Ubuntu releases, the <strong>ec2-expire-snapshots</strong> package can be
installed directly from the Alestic.com PPA using the following
commands:</p>
<pre>
 sudo add-apt-repository ppa:alestic
 sudo apt-get update
 sudo apt-get install ec2-expire-snapshots</pre>
<p>This program may also require the installation of the Net::Amazon::EC2
Perl package from CPAN.  On Ubuntu 10.04 Lucid and higher, this should
happen automatically by the dependency on the libnet-amazon-ec2-perl
package.</p>
<p>On some earlier releases of Ubuntu you can install the required
package with the following command:</p>
<pre>
 sudo PERL_MM_USE_DEFAULT=1 cpan Net::Amazon::EC2</pre>
<p>On Ubuntu 8.04 Hardy, use the following commands instead:</p>
<pre>
 code=$(lsb_release -cs)
 echo &quot;deb <a href="http://ppa.launchpad.net/alestic/ppa/ubuntu">http://ppa.launchpad.net/alestic/ppa/ubuntu</a> $code main&quot;|
   sudo tee /etc/apt/sources.list.d/alestic-ppa.list
 sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys BE09C571
 sudo apt-get update
 sudo apt-get install ec2-expire-snapshots build-essential
 sudo cpan Net::Amazon::EC2</pre>
<p>The default values can be accepted for most of the prompts, though it
is necessary to select a CPAN mirror on Hardy.</p>
<p>
</p>
<hr />
<h1><a name="see_also">SEE ALSO</a></h1>
<dl>
<dt><strong><a name="amazon_ec2" class="item">Amazon EC2</a></strong></dt>

<dt><strong><a name="ebs" class="item">Amazon EC2 EBS (Elastic Block Store)</a></strong></dt>

<dt><strong><a name="ec2_consistent_snapshot" class="item">ec2-consistent-snapshot</a></strong></dt>

</dl>
<p>
</p>
<hr />
<h1><a name="caveats">CAVEATS</a></h1>
<p>EBS snapshots reduce risk.  This program deletes EBS snapshots.
Therefore, the use of this program increases risk.</p>
<p>This program has NOT been tested in all possible environments with all
possible combinations of options, settings, EBS volume dates, AWS/EC2
API responses, operating systems, Perl versions, CPAN package
versions, AWS accounts, AWS credential settings, etc.</p>
<p>This documentation may not accurately convey to you how this program
really works.  This documentation may not be up to date with how the
program really works.</p>
<p>This program may contains defects that could cause it to delete one or
more EBS snapshot that you did not intend to be deleted.</p>
<p>It is possible that this program could leave undeleted some EBS
snapshots that you intended to be deleted, causing you to spend more
than you want in AWS/EC2 fees.</p>
<p>Please test your command line options, EBS snapshot tags, environment,
configuration files and other parameters carefully.  Examine closely
what EBS snapshots are being deleted and not deleted by this program
to make sure it's what you want.</p>
<p>You are responsible for what happens in your EC2 account.  This
software is intended, but not guaranteed, to help in that effort.</p>
<p>This program tries hard to figure out some values are for the AWS key
and AWS secret access key.  In fact, it tries too hard.  This results
in possibly using some credentials it finds that are not the correct
ones you wish to use, especially if you are operating in an
environment where multiple sets of credentials are in use.</p>
<p>
</p>
<hr />
<h1><a name="bugs">BUGS</a></h1>
<p>Please report bugs at <a href="https://github.com/alestic/ec2-expire-snapshots/issues">https://github.com/alestic/ec2-expire-snapshots/issues</a></p>
<p>
</p>
<hr />
<h1><a name="credits">CREDITS</a></h1>
<p>Thanks to the following for performing tests on early versions,
providing feedback, and patches:</p>
<pre>
  Christian Marquardt</pre>
<p>
</p>
<hr />
<h1><a name="author">AUTHOR</a></h1>
<p>Eric Hammond &lt;<a href="mailto:ehammond@thinksome.com">ehammond@thinksome.com</a>&gt;</p>
<p>
</p>
<hr />
<h1><a name="license">LICENSE</a></h1>
<p>Copyright 2009-2012 Eric Hammond &lt;<a href="mailto:ehammond@thinksome.com">ehammond@thinksome.com</a>&gt;</p>
<p>Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
you may not use this file except in compliance with the License.
You may obtain a copy of the License at</p>
<pre>
 <a href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a></pre>
<p>Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.</p>

</body>

</html>
